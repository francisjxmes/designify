{% extends "base.html" %}
{% block title %}Order #{{ order.id }} | Designify{% endblock %}
{% block content %}
<h1>Order #{{ order.id }}</h1>

<ul>
  <li><strong>Package:</strong> {{ order.package.name }}</li>
  <li><strong>Type:</strong> {{ order.design_type }}</li>
  <li><strong>Size:</strong> {{ order.size|default:"—" }}</li>
  <li><strong>Status:</strong> {{ order.get_status_display }}</li>
  <li><strong>Quote:</strong> €{{ order.quoted_price_eur }}</li>
  <li><strong>Brief:</strong><br>{{ order.brief }}</li>
</ul>

{% if order.status == "draft" %}
  <p>
    <a href="{% url 'order_edit' order.id %}">Edit</a>
  </p>

  <form action="{% url 'order_delete' order.id %}" method="post">
    {% csrf_token %}
    <button type="submit">Delete</button>
  </form>

  <p>
    <a href="{% url 'checkout' order.id %}">Pay with card (Stripe)</a>
  </p>  
{% endif %}

{% if order.status == "paid" %}
  <p><strong>Paid ✅</strong> We’ll start your design shortly.</p>
{% endif %}

<p><a href="{% url 'order_list' %}">Back to orders</a></p>

<h2>Deliverables</h2>

{% if order.deliverables.all %}
  <ul>
    {% for d in order.deliverables.all %}
      <li>
        <a href="{{ d.file.url }}">{{ d.file.name }}</a>
        {% if d.note %} — {{ d.note }}{% endif %}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No deliverables uploaded yet.</p>
{% endif %}

{% endblock %}
